---
import Layout from "../layouts/Layout.astro";
import { experiences } from "../data/experience.ts";
import Certificates from "../components/certificates.astro";
import Experience from "../components/experience.astro";
import Projects from "../components/projects.astro";
import Technologies from "../components/technologies.astro";
import Avatar from "../components/avatar.astro";
import LayoutGrid from "../layouts/layout-grid.astro";
import ExperienceCard from "../components/experience-card.astro";
import { getDateDifference } from "../utils/functions/getDateDifference.ts";

const { years, months, days } = getDateDifference(
  experiences[experiences.length - 1].startDate
);
---

<Layout title="Welcome to Astro.">
  <LayoutGrid title="Experiencia">
    <Avatar slot="top-left" variant="2" />
    <Certificates slot="top-left-2" />
    <Experience slot="top-right" />
    <Projects slot="bottom-right" />
    <Technologies slot="bottom-left" />

    <main class="main">
      <h2 class="title">
        {`${years} años ${months} meses y ${days} días de experiencia`}
      </h2>
      <div>
        {
          experiences.map((experience, i) => (
            <ExperienceCard
              experience={experience}
              showLineAfter={i !== 0}
              showLineBefore={i !== experiences.length - 1}
            />
          ))
        }
      </div>
    </main>
  </LayoutGrid>
</Layout>

<style>
  .main {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
  }
  .title {
    font-size: 1.1rem;
    font-weight: bold;
    margin: 0;
    grid-column: 2/3;
    color: #00ffff;
    text-shadow: 1px 1px 5px #006bde;
  }
</style>
